## 2) `carrental.dao` — 数据访问层（DAO）

**一句话定位**：封装所有原始 SQL 与 JDBC 操作，负责把 `ResultSet` → `model`，以及 `model` → SQL 参数。

**职责**

* 提供 CRUD 接口（create/read/update/delete）与基本查询（byId, search, list）
* 使用 `PreparedStatement` 防止 SQL 注入
* 不在 DAO 中写复杂业务逻辑（事务可由 service 管理，DAO 提供可被组合的原子操作）
* 捕获 `SQLException` 并抛出自定义异常或返回错误码

**常见类 / 方法**

* `UserDAO`：`findByUsername(String)`, `insert(User)`, `update(User)`
* `CarDAO`：`getAll()`, `getById(int)`, `search(String)`, `updateStatus(int, String)`
* `RentalDAO`：`insertRental(Rental)`, `updateRentalComplete(rentalId, actualEnd, fee)`, `findOngoing()`
* `LogDAO`：`insertLog(SystemLog)`, `getLogs()`

**注意事项**

* 所有 SQL 用 `PreparedStatement`；对批量操作可使用 `executeBatch`
* DAO 不直接 commit/rollback（交由 service），但可接收 `Connection` 做事务处理
* 对返回 null / 空列表的情况要有统一处理

**package-info.java 模板**

```java
/**
 * carrental.dao
 *
 * 说明：
 * DAO（Data Access Object）层，负责与底层关系型数据库交互。
 * 所有原生 SQL 与 JDBC 相关代码应放在此包中，负责将 ResultSet 转换为 model 对象，
 * 以及将 model 对象的字段设置到 PreparedStatement。
 *
 * 设计要点：
 * - 使用 PreparedStatement 以防 SQL 注入
 * - 不在 DAO 中写复杂业务流程或事务控制
 * - 可提供重载方法接受 Connection，以便 Service 层进行事务控制
 *
 * 常见类：
 * - UserDAO, CarDAO, CustomerDAO, RentalDAO, LogDAO
 */
package carrental.dao;
```